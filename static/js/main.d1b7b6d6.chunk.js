(this["webpackJsonpgenerateur-attestation"]=this["webpackJsonpgenerateur-attestation"]||[]).push([[0],{162:function(e,t,n){},164:function(e,t,n){},234:function(e,t){},235:function(e,t){},236:function(e,t){},237:function(e,t){},238:function(e,t){},239:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(0),c=n.n(r),i=n(25),o=n.n(i),s=(n(162),n(22)),l=n(17),j=n.n(l),u=n(28),b=n(10),d=n(32),O=n(18),h=(n(164),n(144)),f=n(137),p=n(240),m=n(285),x=n(307),g=function(e){var t=Object(r.useState)(),n=Object(O.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(),o=Object(O.a)(i,2),s=o[0],l=o[1];return Object(r.useEffect)((function(){if(s){var e=URL.createObjectURL(s);return c(e),function(){URL.revokeObjectURL(e),c(null)}}}),[s]),Object(r.useEffect)((function(){l(e)}),[e]),[a,s,l]},v=n(7),C=n(138),y=n.n(C),S=n(278),I=n(35),k=n(281),w=n(309),E=n(283),R=Object(S.a)({tabContent:{padding:20,minHeight:620}});function T(e){var t=R(),n=e.children,r=e.value,c=e.index,i=Object(v.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(d.a)(Object(d.a)({role:"tabpanel",hidden:r!==c,id:"full-width-tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},i),{},{children:r===c&&Object(a.jsx)("div",{className:t.tabContent,children:n})}))}function L(e){var t=e.tabs,n=Object(I.a)(),i=c.a.useState(parseInt(localStorage.getItem("currentTab"))||0),o=Object(O.a)(i,2),s=o[0],l=o[1],j=Object(r.useCallback)((function(e,t){l(t),localStorage.setItem("currentTab",t)}),[]),u=Object(r.useCallback)((function(e){l(e),localStorage.setItem("currentTab",e)}),[]),b=Object(r.useMemo)((function(){return t(u)}),[t,u]);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(k.a,{position:"static",color:"default",children:Object(a.jsx)(w.a,{value:s,onChange:j,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example",children:b.map((function(e,t){return Object(a.jsx)(E.a,{label:e.title},t)}))})}),Object(a.jsx)(y.a,{axis:"rtl"===n.direction?"x-reverse":"x",index:s,onChangeIndex:u,children:b.map((function(e,t){return Object(a.jsx)(T,{value:s,index:t,dir:n.direction,children:e.content},t)}))})]})}var F=n(62),D=n(284);function N(e){var t=e.handleClear;return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(F.a,{variant:"h6",children:"COVID-19 ATTESTATION DE D\xc9PLACEMENT D\xc9ROGATOIRE"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{variant:"body2",children:"Cette application a \xe9t\xe9 cr\xe9\xe9e dans le but de faciliter la g\xe9n\xe9ration des attestations de d\xe9placement d\xe9rogatoire."}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{variant:"body2",children:"En aucun cas l'auteur ne peut \xeatre tenu pour responsable en cas du non/mauvais fonctionnement de ce g\xe9n\xe9rateur."}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{variant:"body2",children:Object(a.jsx)("b",{children:"A UTILISER A BON ESCIENT ET A VOTRE PROPRE RISQUE."})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)(F.a,{variant:"body2",children:["Toutes les donn\xe9es sont stock\xe9es localement.",Object(a.jsx)("br",{}),"Le g\xe9n\xe9rateur est le m\xeame que celui utilis\xe9 sur le site officiel.",Object(a.jsx)("br",{}),"Le code source de ce service est consultable sur"," ",Object(a.jsx)("a",{href:"https://github.com/RedFish/generateur-attestation",alt:"code source",children:"GitHub"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(D.a,{color:"secondary",onClick:t,children:"Effacer toutes mes donn\xe9es"})]})}var P=n(293),A=n(294),H=n(295),B=n(314),M=n(296),U=n(297),J=n(298),G=n(68),Y=n(312);function q(e){return Object.entries(e).reduce((function(e,t){var n=Object(O.a)(t,2),a=n[0];return n[1]?e:[].concat(Object(s.a)(e),[a])}),[])}function z(e){return 0===q(e).length}function V(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}var W={travail:"Travail \ud83d\udcbc",achats:"Achats \ud83d\udecd",sante:"Sant\xe9 \ud83d\udc8a",famille:"Famille \ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66",handicap:"handicap \ud83d\udc68\u200d\ud83e\uddbc",sport_animaux:"D\xe9placements brefs \ud83d\udc15",convocation:"Convocation judiciaire ou administrative \u2696\ufe0f",missions:"Missions d'int\xe9r\xeat g\xe9n\xe9ral \ud83d\udea7",enfants:"Enfant \ud83d\udc76\ud83c\udffb"};function _(e){var t=e.selectReason;return G[2][4].items.map((function(e,n){return Object(a.jsx)(m.a,{item:!0,children:Object(a.jsx)(Y.a,{title:(r=e.label,r?r.replace(/<[^>]*>?/gm,""):r),children:Object(a.jsx)(D.a,{color:"primary",variant:"contained",onClick:function(){t(e.code)},children:W[e.code]})})},n);var r}))}var Q=n(299),K=n(300),X=n(313),Z=n(292),$=n(290),ee=n(291),te=n(289),ne=n(288),ae=c.a.forwardRef((function(e,t){return Object(a.jsx)(ne.a,Object(d.a)({direction:"up",ref:t},e))}));function re(e){var t=e.title,n=e.open,r=e.handleDismiss,c=e.handleConfirm;return Object(a.jsxs)(X.a,{open:n,TransitionComponent:ae,onClose:r,children:[Object(a.jsx)(te.a,{id:"alert-dialog-slide-title",children:"Attention"}),Object(a.jsx)($.a,{children:Object(a.jsx)(ee.a,{id:"alert-dialog-slide-description",children:t})}),Object(a.jsxs)(Z.a,{children:[Object(a.jsx)(D.a,{onClick:r,color:"primary",children:"Non"}),Object(a.jsx)(D.a,{onClick:c,color:"primary",variant:"contained",children:"Supprimer"})]})]})}function ce(e){var t=e.histortItems,n=e.setHistortItems,i=e.openHistortItem,o=Object(r.useState)(null),l=Object(O.a)(o,2),j=l[0],u=l[1];return 0===t.length?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(F.a,{variant:"body2",children:"L'historique est vide"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]}):Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(P.a,{children:t.map((function(e,t){return Object(a.jsxs)(A.a,{onClick:function(){return i(e)},children:[Object(a.jsx)(H.a,{children:Object(a.jsxs)(B.a,{children:[e.firstname[0],e.lastname[0]]})}),Object(a.jsx)(M.a,{primary:W[e.reason],secondary:"".concat(e.datesortie," \xe0 ").concat(e.heuresortie)}),Object(a.jsxs)(U.a,{children:[Object(a.jsx)(J.a,{onClick:function(t){t.stopPropagation(),i(e)},edge:"end","aria-label":"show",children:Object(a.jsx)(Q.a,{})}),Object(a.jsx)(J.a,{onClick:function(e){e.stopPropagation(),u(t)},edge:"end","aria-label":"delete",children:Object(a.jsx)(K.a,{})})]})]},t)}))}),Object(a.jsx)(re,{title:"Etes vous sur de vouloir supprimer cette attestation ?",open:null!==j,handleDismiss:function(){u(null)},handleConfirm:function(){n((function(e){var t=Object(s.a)(e);return t.splice(j,1),t})),u(null)}})]})}var ie=n(308),oe=n(301),se=Object(S.a)({preview:{marginTop:10,marginBottom:10}});function le(e){var t=e.editProfile,n=e.toggleEditProfile,i=e.profile,o=e.onChangeProfile,l=se(),j=Object(r.useState)([]),u=Object(O.a)(j,2),b=u[0],h=u[1],f=Object(r.useMemo)((function(){return[].concat(Object(s.a)(G[0]),Object(s.a)(G[1])).map((function(e){return["birthday"].includes(e.key)?Object(d.a)(Object(d.a)({},e),{},{type:"date"}):e}))}),[]);return t?Object(a.jsxs)(c.a.Fragment,{children:[f.map((function(e){var t=e.key,n=e.type,r=e.label,c=e.placeholder,s=e.autocomplete,l=e.minlength,j=e.maxlength,u=e.min,d=e.max,O=e.pattern,h=e.inputmode;Object(v.a)(e,["key","type","label","placeholder","autocomplete","minlength","maxlength","min","max","pattern","inputmode"]);return Object(a.jsx)(m.a,{item:!0,children:Object(a.jsx)(ie.a,{fullWidth:!0,variant:"outlined",label:r,placeholder:c,name:t,type:n,error:b.includes(t),onChange:o,value:i[t],autoComplete:s,InputLabelProps:{shrink:!0},inputProps:{minLength:l,maxLength:j,inputMode:h,min:u,max:d,pattern:O}})},t)})),Object(a.jsx)(m.a,{item:!0,children:Object(a.jsx)(D.a,{color:"primary",variant:"contained",onClick:function(){z(i)?n():h(q(i))},children:"Valider"})})]}):Object(a.jsxs)(m.a,{className:l.preview,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2,children:[Object(a.jsx)(m.a,{item:!0,children:Object(a.jsxs)(B.a,{children:[i.firstname[0],i.lastname[0]]})}),Object(a.jsxs)(m.a,{item:!0,children:[i.firstname," ",i.lastname]}),Object(a.jsx)(m.a,{item:!0,children:Object(a.jsx)(D.a,{color:"primary",variant:"contained",endIcon:Object(a.jsx)(oe.a,{}),onClick:n,children:"Editer"})})]})}var je=n(27),ue=n(26),be=n(31),de=n(145),Oe=function(e){Object(be.a)(n,e);var t=Object(de.a)(n);function n(e){var a;return Object(je.a)(this,n),(a=t.call(this,e)).state={hasError:!1},a}return Object(ue.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.hasError?Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(F.a,{variant:"h6",children:"Une erreur est survenue"}),Object(a.jsx)(F.a,{variant:"body1",children:"N'h\xe9sitez pas \xe0 contribuer sur GitHub pour am\xe9liorer cette application"}),Object(a.jsx)(D.a,{onClick:function(){window.location.reload()},children:"Relancer l'application"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(r.Component),he=n(303),fe=n(302),pe=n(306),me=n(304),xe=n(305),ge=n(141),ve=n(142),Ce=n.n(ve),ye=n(310),Se=n(69);Se.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Se.c.version,"/pdf.worker.js");var Ie=Object(S.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},content:{display:"flex",justifyContent:"center",alignItems:"stretch",backgroundColor:"gray",height:"100%"},iframe:{width:"100%",height:"100%"},pagination:{position:"absolute",margin:20,padding:8,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"}}})),ke=c.a.forwardRef((function(e,t){return Object(a.jsx)(fe.a,Object(d.a)({direction:"up",ref:t},e))}));function we(e){var t=e.url,n=e.blob,c=e.handleClose,i=Ie(),o=Object(r.useRef)(),s=Object(r.useState)(null),l=Object(O.a)(s,2),j=l[0],u=l[1],b=Object(r.useState)(1),d=Object(O.a)(b,2),h=d[0],f=d[1];return Object(r.useEffect)((function(){t&&(u(null),f(1))}),[t]),Object(a.jsxs)(X.a,{fullScreen:!0,open:!!t,onClose:c,TransitionComponent:ke,children:[Object(a.jsx)(k.a,{className:i.appBar,children:Object(a.jsxs)(he.a,{children:[Object(a.jsx)(F.a,{variant:"h6",className:i.title,children:"Aper\xe7u"}),Object(a.jsx)(J.a,{color:"inherit",onClick:function(){return window.open(t)},"aria-label":"new tap",children:Object(a.jsx)(me.a,{})}),Object(a.jsx)(J.a,{color:"inherit",onClick:function(){return Object(ge.saveAs)(n,"attestation_".concat(Ce()().format("YYYYMMDD_HHmmss"),".pdf"))},"aria-label":"download",children:Object(a.jsx)(xe.a,{})}),Object(a.jsx)(D.a,{color:"inherit",onClick:c,children:"Fermer"})]})}),Object(a.jsxs)("div",{ref:o,className:i.content,children:[Object(a.jsx)(Se.a,{file:t,onLoadSuccess:function(e){var t=e.numPages;f(1),u(t)},loading:Object(a.jsx)(pe.a,{color:"inherit",size:20}),children:Object(a.jsx)(Se.b,{height:o.current?o.current.getBoundingClientRect().height:void 0,width:o.current?o.current.getBoundingClientRect().width:void 0,pageNumber:h,renderMode:"canvas"})}),Object(a.jsx)(p.a,{className:i.pagination,elevation:2,children:Object(a.jsx)(ye.a,{page:h,count:j,color:"primary",shape:"rounded",onChange:function(e,t){f(t)}})})]})]})}var Ee={firstname:"",lastname:"",birthday:"",placeofbirth:"",address:"",zipcode:"",city:""};var Re=function(){var e=g(),t=Object(O.a)(e,3),n=t[0],i=t[1],o=t[2],l=Object(r.useState)(JSON.parse(localStorage.getItem("profile"))||Ee),v=Object(O.a)(l,2),C=v[0],y=v[1],S=Object(r.useState)(JSON.parse(localStorage.getItem("histortItems"))||[]),I=Object(O.a)(S,2),k=I[0],w=I[1],E=Object(r.useState)(!z(C)),R=Object(O.a)(E,2),T=R[0],F=R[1],D=function(){F((function(e){return!e}))};Object(r.useEffect)((function(){localStorage.setItem("profile",JSON.stringify(C))}),[C]),Object(r.useEffect)((function(){localStorage.setItem("histortItems",JSON.stringify(k))}),[k]);var P=function(e){y((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(b.a)({},e.target.name,e.target.value))}))},A=function(){var e=Object(u.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(t.base64);case 4:return n=e.sent,e.next=7,n.blob();case 7:a=e.sent,o(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(p.a,{className:"App",children:Object(a.jsxs)(Oe,{children:[Object(a.jsx)(L,{tabs:function(e){return[{title:"Info",content:Object(a.jsx)(N,{handleClear:function(){localStorage.clear(),F(!0),y(Ee),w([]),e(1)}})},{title:"G\xe9n\xe9rer",content:Object(a.jsxs)(m.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",spacing:3,children:[Object(a.jsx)(le,{editProfile:T,toggleEditProfile:D,profile:C,onChangeProfile:P}),!T&&Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(x.a,{}),Object(a.jsx)(_,{selectReason:function(){var t=Object(u.a)(j.a.mark((function t(n){var a,r,c,i,o,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Date,r=a.toLocaleDateString("fr-FR"),c=a.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}).replace(":","h"),i=Object(d.a)(Object(d.a)({},C),{},{birthday:new Date(Date.parse(C.birthday)).toLocaleDateString("fr-FR"),datesortie:r,heuresortie:c}),t.next=6,Object(h.a)(i,n,f.a);case 6:return o=t.sent,t.next=9,V(o);case 9:l=t.sent,u=Object(d.a)(Object(d.a)({},i),{},{reason:n,base64:l}),w((function(e){return[u].concat(Object(s.a)(e.filter((function(e,t){return t<5}))))})),e(2),A(u);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})]})]})},{title:"Historique",content:Object(a.jsx)(ce,{histortItems:k,setHistortItems:w,openHistortItem:A})}]}}),Object(a.jsx)(we,{url:n,blob:i,handleClose:function(){o(null)}})]})})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,315)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(a.jsx)(Re,{}),document.getElementById("root")),Te()}},[[239,1,2]]]);
//# sourceMappingURL=main.d1b7b6d6.chunk.js.map